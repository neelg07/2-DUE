{% extends "layout.html" %}

{% block script %}
    <script src="/static/weather.js" defer></script>
{% endblock %}

{% block nav %}
    <a class="navbar-brand" href="/weather"><span class="blue">2</span><span class="red dash">-</span><span class="yellow">D</span><span class="green">U</span><span class="red">E</span></a>
    <h2 class="weather-header"><em>WEATHER</em></h2>

    <div class="login btn-group">
        <button type="button" class="btn btn-danger" id="menu-btn">Welcome, {{ username }} !</button>
        <button type="button" class="btn btn-outline-danger dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="visually-hidden">Toggle Dropdown</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
            <li><a href="/daily" class="dropdown-item" id="daily-drop">2DUE DAILY</a></li>
            <li><a href="/monthly" class="dropdown-item" id="monthly-drop">2DUE MONTHLY</a></li>
            <li><a href="/yearly" class="dropdown-item" id="yearly-drop">2DUE YEARLY</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a href="/weather" class="dropdown-item" id="weather-drop">WEATHER</a></li>
            <li><a href="/account" class="dropdown-item" id="my-account">My Account</a></li>
            <li><a href="/logout" class="dropdown-item" id="logout">LOG OUT</a></li>
        </ul>
    </div>

{% endblock %}

{% block main %}
    
<div class="weather-main">
    <form class="weather-form" action="/weather" method="post">
        <div class="mb-3">
            <input autocomplete="off" autofocus class="form-control mx-auto w-auto" id="city-input" name="City" placeholder="City Name" type="text" required size="30"> 
        </div>
        <button class="btn btn-primary" id="city-submit" name="city-submit" type="submit">Check Weather</button>
    </form>

    <ul class="cities">
        <li>
            {% if city %}
            <div class="weather">
            {% else %}
            <div class="weather hide">
            {% endif %}
                <div class="close-weather">
                    <button class="close-weather">X</button>
                </div>
                <div class="weather-icon">
                    <img class='icon' src="http://openweathermap.org/img/w/{{ icon }}.png" alt="Image" width="50px">
                </div>
                <div class="city">{{ city }}</div>
                <div class="forecast"><i>Forecast: </i><b>{{ weather }}</b></div>
                <div class="temp"><i id="temp">Temperature: </i><strong>{{ temp }} &#176 F</strong></div>
                <div class="weather-info"><i>Description:</i> <b>{{ description }}</b></div>
            </div>
            </div>
        </li>
    </ul>
 </div>

    {% block security %}{% endblock %}

{% endblock %}